import{v as e,b as n,h as t,I as o,a as s,i as r,l as u}from"./server.mjs";import{aa as i}from"../_/nitro.mjs";import{u as a}from"./v3-CguCvAtn.mjs";import{u as l}from"./asyncData-2UkiRMsx.mjs";import"../routes/renderer.mjs";import"../_/shared.esm-bundler.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"cloudflare:workers";async function loadIcon(e,n){if(!e)return null;const t=r(e);if(t)return t;let o;const s=u(e).catch(()=>(console.warn(`[Icon] failed to load icon \`${e}\``),null));return n>0?await Promise.race([s,new Promise(t=>{o=setTimeout(()=>{console.warn(`[Icon] loading icon \`${e}\` timed out after ${n}ms`),t()},n)})]).finally(()=>clearTimeout(o)):await s,r(e)}function useResolvedName(n){const o=t().icon,s=(o.collections||[]).sort((e,n)=>n.length-e.length);return e.computed(()=>{var e;const t=n(),r=t.startsWith(o.cssSelectorPrefix)?t.slice(o.cssSelectorPrefix.length):t,u=(null==(e=o.aliases)?void 0:e[r])||r;if(!u.includes(":")){const e=s.find(e=>u.startsWith(e+"-"));return e?e+":"+u.slice(e.length+1):u}return u})}function resolveCustomizeFn(e,n){if(!1!==e)return!0===e||null===e?n:e}const c="NUXT_ICONS_SERVER_CSS";const m=e.defineComponent({name:"NuxtIconCss",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(o){const r=n(),u=t().icon,l=e.computed(()=>o.name?u.cssSelectorPrefix+o.name:""),m=e.computed(()=>"."+function(e){return e.replace(/([^\w-])/g,"\\$1")}(l.value));return e.onServerPrefetch(async()=>{var e;{const n=s().icon||{};if(!(null==(e=null==n?void 0:n.serverKnownCssClasses)?void 0:e.includes(l.value))){const e=await loadIcon(o.name,u.fetchTimeout).catch(()=>null);if(!e)return null;let n=r.vueApp._context.provides[c];if(n||(n=r.vueApp._context.provides[c]=new Map,r.runWithContext(()=>{a({style:[()=>{let e=Array.from(n.values()).sort().join("");return u.cssLayer&&(e=`@layer ${u.cssLayer} {${e}}`),{innerHTML:e}}]},{tagPriority:"low"})})),o.name&&!n.has(o.name)){const t=function(e,n=!0){let t=m.value;u.cssWherePseudo&&(t=`:where(${t})`);const s=i(e,{iconSelector:t,format:"compressed",customise:resolveCustomizeFn(o.customize,u.customize)});return u.cssLayer&&n?`@layer ${u.cssLayer} { ${s} }`:s}(e,!1);n.set(o.name,t)}return null}}}),()=>e.h("span",{class:["iconify",l.value]})}}),d=e.defineComponent({name:"NuxtIconSvg",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(s,{slots:r}){n();const u=t().icon,i=useResolvedName(()=>s.name),a="i-"+i.value;return i.value&&e.onServerPrefetch(async()=>{await l(a,async()=>await loadIcon(i.value,u.fetchTimeout),{deep:!1})}),()=>e.h(o,{icon:i.value,ssr:!0,customise:resolveCustomizeFn(s.customize,u.customize)},r)}}),p=e.defineComponent({name:"NuxtIcon",props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(o,{slots:s}){const r=n(),u=t().icon,i=useResolvedName(()=>o.name),a=e.computed(()=>{var e;return(null==(e=r.vueApp)?void 0:e.component(i.value))||("svg"===(o.mode||u.mode)?d:m)}),l=e.computed(()=>{const e=o.size||u.size;return e?{fontSize:Number.isNaN(+e)?e:e+"px"}:null});return()=>e.h(a.value,{...u.attrs,name:i.value,class:u.class,style:l.value,customize:o.customize},s)}});export{p as default};
//# sourceMappingURL=index-DkTBTIXB.mjs.map
