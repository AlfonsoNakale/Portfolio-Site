import{N as e,a1 as t,a2 as n,a3 as o,D as r}from"../_/nitro.mjs";import{f as a}from"./node-hwMnPqaI.mjs";import{u}from"./preview-lsRfUkkH.mjs";import{v as d}from"./server.mjs";import{j as s}from"../routes/renderer.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"cloudflare:workers";import"../_/shared.esm-bundler.mjs";const i=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],l="default",p=/^@|^v-on:/,c=/^:|^v-bind:/,m=/^v-model/,f=["select","textarea","input"],v=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(e=>[e,`prose-${e}`])),y=d.defineComponent({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(e){var t,n,o,r,a,u,s,l;const p=null==(o=null==(n=null==(t=d.getCurrentInstance())?void 0:t.appContext)?void 0:n.app)?void 0:o.$nuxt,c=(null==p?void 0:p.$route)||(null==p?void 0:p._route),{mdc:m}=(null==(r=null==p?void 0:p.$config)?void 0:r.public)||{},f={...(null==(a=null==m?void 0:m.components)?void 0:a.prose)&&!1!==e.prose?v:{},...(null==(u=null==m?void 0:m.components)?void 0:u.map)||{},...d.toRaw((null==(l=null==(s=e.data)?void 0:s.mdc)?void 0:l.components)||{}),...e.components},y=d.computed(()=>{var t;const n=((null==(t=e.body)?void 0:t.children)||[]).map(e=>e.tag||e.type).filter(e=>!i.includes(e));return Array.from(new Set(n)).sort().join(".")}),g=d.reactive({...e.data});return d.watch(()=>e.data,e=>{Object.assign(g,e)}),await async function(e,t){if(!e)return;const n=Array.from(new Set(loadComponents(e,t)));function loadComponents(e,t){const n=e.tag;if("text"===e.type||"binding"===n||"comment"===e.type)return[];const o=findMappedTag(e,t.tags),r=[];"root"===e.type||i.includes(o)||r.push(o);for(const n of e.children||[])r.push(...loadComponents(n,t));return r}await Promise.all(n.map(async e=>{if((null==e?void 0:e.render)||(null==e?void 0:e.ssrRender)||(null==e?void 0:e.__ssrInlineRender))return;const t=resolveVueComponent(e);(null==t?void 0:t.__asyncLoader)&&!t.__asyncResolved&&await t.__asyncLoader()}))}(e.body,{tags:f}),{tags:f,contentKey:y,route:c,runtimeData:g,updateRuntimeData:function(e,t){const n=e.split(".").length-1;return e.split(".").reduce((e,o,r)=>r==n&&e?(e[o]=t,e[o]):"object"==typeof e?e[o]:void 0,g)}}},render(e){var t,n;const{tags:o,tag:r,body:u,data:s,contentKey:i,route:l,unwrap:p,runtimeData:c,updateRuntimeData:m}=e;if(!u)return null;const f={...s,tags:o,$route:l,runtimeData:c,updateRuntimeData:m},v=!1!==r?resolveVueComponent(r||(null==(t=f.component)?void 0:t.name)||f.component||"div"):void 0;return v?d.h(v,{...null==(n=f.component)?void 0:n.props,class:e.class,...this.$attrs,key:i},{default:defaultSlotRenderer}):null==defaultSlotRenderer?void 0:defaultSlotRenderer();function defaultSlotRenderer(){return p?a(renderSlots(u,d.h,f,f).default(),"string"==typeof p?p.split(" "):["*"]):renderSlots(u,d.h,f,f).default()}}});function renderNode(e,t,r,a={}){if("text"===e.type)return t(d.Text,e.value);if("comment"===e.type)return t(d.Comment,null,e.value);const u=e.tag,s=findMappedTag(e,r.tags);if("binding"===e.tag)return function(e,t,n,o={}){var r,a,u;const s={...n.runtimeData,...o,$document:n,$doc:n},i=/\.|\[(\d+)\]/,l=null==(a=e.props)?void 0:a.value.trim().split(i).filter(Boolean),p=l.reduce((e,t)=>{if(e&&t in e)return"function"==typeof e[t]?e[t]():e[t]},s),c=null==(u=e.props)?void 0:u.defaultValue;return t(d.Text,null!=(r=null!=p?p:c)?r:"")}(e,t,r,a);const i=resolveVueComponent(s);"object"==typeof i&&(i.tag=u);const l=function(e,t){const{tag:r="",props:a={}}=e;return Object.keys(a).reduce(function(e,u){if("__ignoreMap"===u)return e;const d=a[u];if(m.test(u))return function(e,t,n,o,{native:r}){var a;const u=(null==(a=e.match(/^v-model:([^=]+)/))?void 0:a[1])||"modelValue",d=r?"onInput":`onUpdate:${u}`;return n[r?"value":u]=evalInContext(t,o.runtimeData),n[d]=e=>{var n;o.updateRuntimeData(t,r?null==(n=e.target)?void 0:n.value:e)},n}(u,d,e,t,{native:f.includes(r)});if("v-bind"===u)return function(e,t,n,o){const r=evalInContext(t,o);return n=Object.assign(n,r),n}(0,d,e,t);if(p.test(u))return function(e,t,n,o){return e=e.replace(p,""),n.on=n.on||{},n.on[e]=()=>evalInContext(t,o),n}(u,d,e,t);if(c.test(u))return function(e,t,n,o){return e=e.replace(c,""),n[e]=evalInContext(t,o),n}(u,d,e,t);const{attribute:s}=n(o,u);return Array.isArray(d)&&d.every(e=>"string"==typeof e)?(e[s]=d.join(" "),e):(e[s]=d,e)},{})}(e,r);return t(i,l,renderSlots(e,t,r,{...a,...l}))}function renderSlots(e,t,n,o){const r=(e.children||[]).reduce((e,t)=>{if(!function(e){return"template"===e.tag}(t))return e[l].push(t),e;const n=function(e){let t="";for(const n of Object.keys(e.props||{}))if(n.startsWith("#")||n.startsWith("v-slot:")){t=n.split(/[:#]/,2)[1];break}return t||l}(t);return e[n]=e[n]||[],"element"===t.type&&e[n].push(...t.children||[]),e},{[l]:[]}),a=Object.entries(r).reduce((e,[r,a])=>a.length?(e[r]=()=>function(e){const t=[];for(const n of e){const e=t[t.length-1];n.type===d.Text&&(null==e?void 0:e.type)===d.Text?e.children=e.children+n.children:t.push(n)}return t}(a.map(e=>renderNode(e,t,n,o))),e):e,{});return a}const resolveVueComponent=t=>{if("string"==typeof t){if(i.includes(t))return t;const n=d.resolveComponent(e(t),!1);return t&&"AsyncComponentWrapper"!==(null==n?void 0:n.name)?"string"==typeof n?n:"setup"in n?d.defineAsyncComponent(()=>new Promise(e=>e(n))):n:n}return t};function evalInContext(e,t){const n=e.split(".").reduce((e,t)=>"object"==typeof e?e[t]:void 0,t);return void 0===n?r(e):n}function findMappedTag(n,o){var r;const a=n.tag;return a&&void 0===(null==(r=n.props)?void 0:r.__ignoreMap)&&(o[a]||o[e(a)]||o[t(n.tag)])||a}const g=y.setup;y.setup=(e,t)=>{const n=d.useSSRContext();return(n.modules||(n.modules=new Set)).add("node_modules/@nuxtjs/mdc/dist/runtime/components/MDCRenderer.vue"),g?g(e,t):void 0};const b=d.defineComponent({__name:"ContentRendererMarkdown",__ssrInlineRender:!0,props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})}},setup(e){const t=e,n=u().isEnabled(),o=d.computed(()=>{let e=t.value.body||t.value;return t.excerpt&&t.value.excerpt&&(e=t.value.excerpt),e}),r=d.computed(()=>{const{body:e,excerpt:n,...o}=t.value;return{...o,...t.data}}),a=d.computed(()=>({...t.components,...r.value._components||{}}));return(t,u,i,l)=>{u(s(y,d.mergeProps({body:o.value,data:r.value,tag:e.tag,components:a.value,"data-content-id":d.unref(n)?e.value._id:void 0},l),null,i))}}}),h=b.setup;b.setup=(e,t)=>{const n=d.useSSRContext();return(n.modules||(n.modules=new Set)).add("node_modules/@nuxt/content/dist/runtime/components/ContentRendererMarkdown.vue"),h?h(e,t):void 0};export{b as default};
//# sourceMappingURL=ContentRendererMarkdown-GC7JwlEl.mjs.map
