import{v as e,b as t,g as n,I as o,a as s,h as r,l as u}from"./server.mjs";import{M as i}from"../_/nitro.mjs";import{u as a}from"./v3-DaDvs6eT.mjs";import{u as l}from"./asyncData-DpP0-tv7.mjs";import"../routes/renderer.mjs";import"../_/shared.esm-bundler.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"cloudflare:workers";import"node:path";import"node:util";async function loadIcon(e,t){if(!e)return null;const n=r(e);if(n)return n;let o;const s=u(e).catch(()=>(console.warn(`[Icon] failed to load icon \`${e}\``),null));return t>0?await Promise.race([s,new Promise(n=>{o=setTimeout(()=>{console.warn(`[Icon] loading icon \`${e}\` timed out after ${t}ms`),n()},t)})]).finally(()=>clearTimeout(o)):await s,r(e)}function useResolvedName(t){const o=n().icon,s=(o.collections||[]).sort((e,t)=>t.length-e.length);return e.computed(()=>{var e;const n=t(),r=n.startsWith(o.cssSelectorPrefix)?n.slice(o.cssSelectorPrefix.length):n,u=(null==(e=o.aliases)?void 0:e[r])||r;if(!u.includes(":")){const e=s.find(e=>u.startsWith(e+"-"));return e?e+":"+u.slice(e.length+1):u}return u})}function resolveCustomizeFn(e,t){if(!1!==e)return!0===e||null===e?t:e}const c="NUXT_ICONS_SERVER_CSS";const m=e.defineComponent({name:"NuxtIconCss",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(o){const r=t(),u=n().icon,l=e.computed(()=>o.name?u.cssSelectorPrefix+o.name:""),m=e.computed(()=>"."+function(e){return e.replace(/([^\w-])/g,"\\$1")}(l.value));return e.onServerPrefetch(async()=>{var e;{const t=s().icon||{};if(!(null==(e=null==t?void 0:t.serverKnownCssClasses)?void 0:e.includes(l.value))){const e=await loadIcon(o.name,u.fetchTimeout).catch(()=>null);if(!e)return null;let t=r.vueApp._context.provides[c];if(t||(t=r.vueApp._context.provides[c]=new Map,r.runWithContext(()=>{a({style:[()=>{let e=Array.from(t.values()).sort().join("");return u.cssLayer&&(e=`@layer ${u.cssLayer} {${e}}`),{innerHTML:e}}]},{tagPriority:"low"})})),o.name&&!t.has(o.name)){const n=function(e,t=!0){let n=m.value;u.cssWherePseudo&&(n=`:where(${n})`);const s=i(e,{iconSelector:n,format:"compressed",customise:resolveCustomizeFn(o.customize,u.customize)});return u.cssLayer&&t?`@layer ${u.cssLayer} { ${s} }`:s}(e,!1);t.set(o.name,n)}return null}}}),()=>e.h("span",{class:["iconify",l.value]})}}),d=e.defineComponent({name:"NuxtIconSvg",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(s,{slots:r}){t();const u=n().icon,i=useResolvedName(()=>s.name),a="i-"+i.value;return i.value&&e.onServerPrefetch(async()=>{await l(a,async()=>await loadIcon(i.value,u.fetchTimeout),{deep:!1})}),()=>e.h(o,{icon:i.value,ssr:!0,customise:resolveCustomizeFn(s.customize,u.customize)},r)}}),p=e.defineComponent({name:"NuxtIcon",props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(o,{slots:s}){const r=t(),u=n().icon,i=useResolvedName(()=>o.name),a=e.computed(()=>{var e;return(null==(e=r.vueApp)?void 0:e.component(i.value))||("svg"===(o.mode||u.mode)?d:m)}),l=e.computed(()=>{const e=o.size||u.size;return e?{fontSize:Number.isNaN(+e)?e:e+"px"}:null});return()=>e.h(a.value,{...u.attrs,name:i.value,class:u.class,style:l.value,customize:o.customize},s)}});export{p as default};
//# sourceMappingURL=index-B_WmpXFR.mjs.map
