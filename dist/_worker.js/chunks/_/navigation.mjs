import{a as t}from"./path-meta.mjs";import{a as e}from"./nitro.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"cloudflare:workers";function createNav(i,n){const{navigation:r}=e().public.content;if(!1===r)return[];const pickNavigationFields=t=>{return{...(i=["title",...r.fields],t=>(t=t||{},i&&i.length?i.filter(e=>void 0!==t[e]).reduce((e,i)=>Object.assign(e,{[i]:t[i]}),{}):t))(t),...(e=t?.navigation,"[object Object]"===Object.prototype.toString.call(e)?t.navigation:{})};var e,i};return sortAndClear(i.sort((t,e)=>t._path.localeCompare(e._path)).reduce((e,i)=>{const r=i._path.substring(1).split("/"),o=i._id.split(":").slice(1),a=!!o[o.length-1]?.match(/([1-9][0-9]*\.)?index.md/g),getNavItem=t=>({title:t.title,_path:t._path,_file:t._file,children:[],...pickNavigationFields(t),...t._draft?{_draft:!0}:{}}),l=getNavItem(i);if(a){const t=n[l._path];if(void 0!==t?.navigation&&!t?.navigation)return e;if("/"!==i._path){const t=getNavItem(i);l.children.push(t)}t&&Object.assign(l,pickNavigationFields(t))}if(1===r.length)return e.push(l),e;return r.slice(0,-1).reduce((e,o,a)=>{const l="/"+r.slice(0,a+1).join("/"),s=n[l];if(void 0!==s?.navigation&&!s.navigation)return[];let c=e.find(t=>t._path===l);return c||(c={title:t(o),_path:l,_file:i._file,children:[],...s&&pickNavigationFields(s)},e.push(c)),c.children},e).push(l),e},[]))}const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function sortAndClear(t){t.forEach(t=>{t._file=t._file.split(".").slice(0,-1).join(".")});const e=t.sort((t,e)=>i.compare(t._file,e._file));for(const t of e)t.children?.length?sortAndClear(t.children):delete t.children,delete t._file;return t}export{createNav};
//# sourceMappingURL=navigation.mjs.map
